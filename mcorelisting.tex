\usepackage{listings}
\usepackage{xcolor}

\def \mcorefontsize {\normalsize}

\def \mcorefont {\fontfamily{pcr}\selectfont\mcorefontsize}

\definecolor{ckeywords}{rgb}{0.13,0.13,1}
\definecolor{ccomments}{rgb}{0,0.5,0.5}
\definecolor{cstrings}{rgb}{0,0.5,0}
\definecolor{cwarnings}{rgb}{1,0.5,0}

\lstdefinelanguage{MCore}{
    morekeywords={Lam,con,else,end,fix,if,in,lam,lang,let,match,recursive,sem,syn,then,type,use,utest,with,hole,switch,case},
    otherkeywords={->},
    keywordstyle=\color{ckeywords},
    morekeywords=[2]{mexpr,include,never},
    keywordstyle=[2]\color{cwarnings},
    morecomment=[l][\color{ccomments}]{--},
    morestring=[b]",
    stringstyle=\color{cstrings},
    sensitive=true,
    basicstyle=\mcorefont,
    breaklines=true,
    escapeinside={(*@}{@*)},
    numbers=left,
    stepnumber=1,
    numberstyle=\tiny,
    xleftmargin=0pt, % numbers will be in the margins
    columns=fixed, % same width for all characters
    % columns=flexible,
    % columns=fullflexible,
    showstringspaces=false,
    mathescape=true,
    breaklines=true,
    breakatwhitespace=true,
    mathescape=true,
    showstringspaces=false
  }

\lstnewenvironment{mcore}
  {
    \lstset{
      language=MCore,
      numbers=none,
      xleftmargin=0pt
    }
  }{}

\lstnewenvironment{mcore-lines}
  {
    \lstset{
      language=MCore,
      xleftmargin=0pt
    }
  }{}

\newcommand{\mcoreinline}[1]{\lstinline[{language=MCore}]|#1|}
